---
title: Sales Order Agent overview (preview)
description: Learn about the sales order Copilot agent in Business Central.
ms.date: 11/22/2024
ms.topic: overview
author: dmc-dk
ms.author: dmitrych
ms.reviewer: jswymer
ms.collection:
  - bap-ai-copilot
---
# Sales Order Agent overview (preview)

[!INCLUDE [preview-banner](~/../shared-content/shared/preview-includes/preview-banner.md)]

The Sales Order Agent helps Business Central users automate capturing sales orders. The agent uses AI to analyze customer requests received via email, locate the customer in Business Central, and engage in multi-turn email conversations to clarify requests if important details are missing or more choices are available. It also checks and informs the customer about the availability of the items they're looking for and follows up with a sales quote. The quote is formatted as a PDF and includes the requested items, quantities, units of measure, prices, taxes, requested delivery dates, provided external document reference, and other important details.

> [!TIP]
> Watch a short video in the Dynamics Business Central channel on YouTube at [Get started with the Sales Order Agent for Dynamics 365 Business Central](https://www.youtube.com/watch?v=6icbmbLc_Og).

[!INCLUDE [limited-public-preview](includes/limited-public-preview.md)]
<!--[!INCLUDE [preview-note](~/../shared-content/shared/preview-includes/production-ready-preview-dynamics365.md)]-->

## Functionality

### Activation and configuration

The agent is readily available in the product. To activate it, you specify the email inbox you want the agent to monitor. Additionally, specify your preferences for certain aspects of the agent's behavior and designate the users authorized to use the agent to process customers' orders, enabling the agent to act on behalf of a company, department, or team&mdash;not just an individual user.

### Permissions and profiles

The agent operates within the permissions and profile (role) assigned to it by the administrator. Permissions define which areas of the product (tables) the agent has access to. The profile outlines the UX elements (pages and actions) the agent can engage with during its work. Default permissions and the profile are assigned to the agent out of the box; however, administrators can update these permissions as needed.

### Operation

The Sales Order Agent is designed to run autonomously in the background, using AI to perform its tasks while keeping users informed about key steps and involving them when necessary. Involvement might be needed in specific scenarios, for instance to review outgoing messages or to provide missing details, based on configured preferences.

Conceptually, the agent interacts with Business Central functionality in a manner similar to how Business Central users interact with it. The agent is provided with general instructions, expressed in natural language, outlining how the process of capturing sales orders should be handled. It then uses UI metadata, such as captions, tooltips, and other properties, combined with the data presented on Business Central pages and its own instructions, to determine each step required to complete the task. Starting from the designated Role Center, the agent navigates the pages, invokes UI actions, and enters data as a user would. This approach allows a high degree of flexibility and adaptability for the agent to achieve its goal because the agent’s interaction surface and steps aren’t hardcoded. Instead, AI determines them based on the context of each step.

This flexibility enables the agent to discover and interact with relevant custom fields and actions. It can also attempt to automatically resolve validation errors by processing displayed error messages and adjusting the input accordingly.

### Email monitoring and communications

The agent relies on an internal email dispatcher running as a background task to continuously monitor a designated mailbox for item requests. The dispatcher triggers the agent to perform tasks and subsequently sends results, such as prepared sales quotes or orders, to the customer in response.

The agent helps with composing email bodies based on the context of the current step. For instance, it can list available inventory or provide a brief description of the attached sales quote or sales order. Additionally, it can detect and flag irrelevant or potentially malicious email content, prompting users to review and decide how to proceed.  

### Customer and Business Central user involvement

Users can inspect the agent's steps and the created sales documents. They can easily identify the data entered by the agent compared to data generated by Business Central's own business logic and provide more input if needed, such as adding discounts or updating shipping costs.

If the customer decides to update the quote by sending another email listing required changes, the agent assists with these changes by locating the quote and making the requested updates. Once the customer confirms the quote's accuracy, the agent converts it into a sales order, which is then also shared with the customer via email, following user's confirmation. 

The agent always involves designated Business Central users to review and approve all outgoing messages, before they're sent to the customers. 

## How the agent processes requests

The agent monitors a designated mailbox for incoming customer emails about item inquiries. The mailbox is specified in the Sales Order Agent configuration (learn more in [Set up Sales Order Agent](sales-order-agent-setup.md)). When the agent identifies a potential request in an email, it starts to prepare a sales quote. For example, it verifies whether the customer is registered in Business Central. It then checks item availability, creates a sales quote, and prepares an email response to the customer that includes the quote as a PDF attachment.

The agent ensures that a request from one customer can't be about another customer's requests. When the agent processes a request, it first identifies the customer in Business Central using the sender's email address (the agent searches among the registered Business Central contacts and then looks up the customer linked to that contact). If the customer isn't found, the agent stops processing the task and requests intervention from the user. If the customer is found, the agent filters out all sales quotes and orders that don't belong to the customer. This behavior ensures that the agent only creates and updates documents belonging to the customer that sent the email.

The agent analyzes incoming emails to detect parameters for preparing a new sales quote or updating an existing one. Apart from the items themselves, parameters might include the item attributes, quantities, units of measure, requested delivery date, external document number, and more. The agent then searches for these items in Business Central's inventory, within a wide range of related tables.

|Table|Fields|
|-|-|
|Items|No.<br>Description<br>Description 2<br>Search Description<br>GTIN<br>Vendor Item Number|
|Item Variant|Code<br>Description<br>Description 2|
|Item Reference|Reference No.<br>Description<br>Description 2|
|Item Attributes|Name<br>Value|
|Item Category| Code<br>Description<br>Parent Category - 1 Level|
|Item Translation|Language<br>Description<br>Description 2|
|Item Identifier|Code|
|Extended text Line|Text|

Although the agent can find products based on vague and incomplete descriptions, its effectiveness is influenced by the quality of product information in Business Central. You can improve the agent's ability to find products by enhancing descriptions, attributes, categories, and extended text of your inventory items.

When it finds the items, the agent checks the items' availability by analyzing multiple parameters, such as required quantity, delivery date, location, scheduled and planned receipts and more.

Some steps require your intervention, like reviewing email correspondence and assisting the agent as needed. Until an order is created, the agent handles back-and-forth email exchanges with the customer to resolve missing details and allow modifications to the original request.

## Agent process flow

Processing a sales quote request into an order involves three participants:

- Customer who requests a sales quote via email
- Sales order agent, which monitors the mailbox, handles the incoming request, and creates the quote and order
- Business Central user who reviews agent tasks

The general flow is illustrated in the figure, which is followed by more details of the steps. The actual flow might vary depending on factors such as follow-up requests, changes or cancellations in review, blocking issues, and so on.

![Shows the Sales Order Agent flow](media/soa-flow.svg)

1. Customer: Sends email to Business Central mailbox asking for a sales quote for items.
1. Sales order agent: Picks up unread email from inbox and creates a task with a step for reviewing the incoming request.
1. Reviewer: Reviews/confirms the step with email.  
1. Sales order agent:
    1. Finds the contact or customer.
    1. Finds the requested items and verifies their availability.
    1. Creates the sales quote. 
    1. Adds review step with a reply email with attached sales quote as pdf.
1. Reviewer: Reviews/confirms email and sales quotes. 
1. Sales order agent: Sends email and sales quote PDF to customer.
1. Customer: Review sales quote and sends email requesting order.
1. Sales order agent: Picks up email and adds review step.
1. Reviewer: Reviews/confirms the confirmation email for a sale order.
1. Sales order agent:
    1. Converts quote to order.
    1. Adds review task with outgoing email confirming order.
1. Reviewer: Reviews/confirms outgoing email.
1. Sales order agent: Sends email to customer.
  
## Next steps

- [Set up the Sales Order Agent](sales-order-agent-setup.md)
- [Process sales quotes and orders with Sales Order Agent](sales-order-agent-process.md)

## Related information

[Configure Copilot and AI capabilities](enable-ai.md)  
